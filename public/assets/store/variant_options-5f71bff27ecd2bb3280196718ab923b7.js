function VariantOptions(t,n){function e(){g=$("#product-variants .variant-options"),r(g.find("a.option-value").addClass("locked")),i(),o(b.find("a.option-value")),f(),$(".clear-option a.clear-button").hide().click(h)}function a(t){return parseInt($(t).attr("class").replace(/[^\d]/g,""))}function i(t){m=isNaN(t)?m:t,b=$(g.get(m)),buttons=b.find("a.option-value"),b.find("a.clear-button").hide()}function r(t){return t.removeClass("selected")}function o(t){return t.not(".unavailable").removeClass("locked").unbind("click").filter(".in-stock").click(v).filter(".auto-click").removeClass("auto-click").click()}function s(){m++,i(),c(buttons.removeClass("locked")),o(buttons.filter(".in-stock"))}function c(e){var a,i,o=0,s=$.map(g.find("a.selected"),function(t){return t.rel});$.each(s,function(n,e){n=e.split("-");var i=t[n[0]][n[1]];a=$.keys(i);var r=Array.find_matches(y.concat(a));0==y.length?y=a:r&&(y=r)}),e.removeClass("in-stock out-of-stock unavailable").each(function(t,e){i=l(e.rel),a=$.keys(i),0==a.length?r($(e).addClass("unavailable locked").unbind("click")):1==a.length?(_var=i[a[0]],$(e).addClass(n||_var.count?1==y.length?"in-stock auto-click":"in-stock":"out-of-stock")):n?$(e).addClass("in-stock"):($.each(i,function(t,n){o+=n.count}),$(e).addClass(o?"in-stock":"out-of-stock"))})}function l(n){var e,a,i,r={};"string"==typeof n&&(n=[n]);var o,s,c,l;e=n.length;try{for(;e--;)if(a=n[e].split("-"),o=a[0],s=a[1],c=t[o],c&&(l=c[s],a=$.keys(l),l&&a.length))for(var u=a.length;u--;)i=l[a[u]],i&&$.keys(i).length&&0<=y.indexOf(i.id.toString())&&(r[i.id]=i)}catch(d){}return r}function u(t){return parseFloat(t.replace(/[^\d\.]/g,""))}function d(){var t=g.find("a.selected"),n=l(t.get(0).rel);if(t.length==g.length)return k=n[y[0]];var e=[];return $.each(n,function(t,n){e.push(n.price)}),e=$.unique(e).sort(function(t,n){return u(t)<u(n)?-1:1}),$("#product-price .price").html(1==e.length?'<span class="price assumed">'+e[0]+"</span>":'<span class="price from">'+e[0]+'</span> - <span class="price to">'+e[e.length-1]+"</span>"),!1}function f(){if(k){$("#variant_id").val(k.id),$("#product-price .price").removeClass("unselected").text(k.price),$("button[type=submit]").attr("disabled",!1).fadeTo(100,1);try{show_variant_images(k.id)}catch(t){}}else $("#variant_id").val(""),$("button[type=submit]").attr("disabled",!0).fadeTo(0,.5),$("#product-price .price").addClass("unselected").text("(select)")}function p(t){k=null,i(t),o(buttons.removeClass("selected")),f(),b.nextAll().each(function(t,n){r($(n).find("a.option-value").show().removeClass("in-stock out-of-stock").addClass("locked").unbind("click")),$(n).find("a.clear-button").hide()}),show_all_variant_images()}function h(t){t.preventDefault(),p(a(this))}function v(t){t.preventDefault(),k=null,y=[];var n=$(this);b.has(n).length||p(g.index(n.parents(".variant-options:first"))),r(buttons);var n=o(n.addClass("selected"));b.find("a.clear-button").css("display","block"),s(),d()&&f()}var k,g,b,t=t,n=n,m=0,y=[];$(document).ready(e)}$.extend({keys:function(t){var n=[];return $.each(t,function(t){n.push(t)}),n}}),Array.indexOf||(Array.prototype.indexOf=function(t){for(var n=0;n<this.length;n++)if(this[n]==t)return n;return-1}),Array.find_matches||(Array.find_matches=function(t){var n,e=[];for(t=t.sort(),n=t.length;n--;)t[n-1]==t[n]&&e.push(t[n]);return 0==e.length?!1:e});